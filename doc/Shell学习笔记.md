# 一、shell概述

shell是一个**命令行解释器**，它接受应用程序/用户命令，然后调用操作系统内核。
shell也是一个功能强大的编程语言，易编写、易调试、灵活性强。
![1679218762801](image/Shell学习笔记/1679218762801.png)

# 二、Shell基础

## 1.shell运行

shell文件内容如下：
*#!/bin/bash*
*echo "hello world"*

- 方式一
  chmod +x ./test.sh      #添加权限
  ./test.sh               #执行脚本
- 方式二
  sh test.sh            #会新开一个子shell
- 方式三：***直接在当前sh中执行，不会另开子shell***
  source test.sh
  或
  . test.sh

## 2.shell变量

2.1 系统预定义变量
\$HOME  \$PWD   \$SHELL   \$USER   以上变量可以直接使用（加上$符号）
使用*env*命令可查看所有的系统全局变量
使用*set*命令可查看所有的变量

2.2 自定义变量
  2.2.1 基本语法

- 定义变量：变量名=变量值，等号前后不能有空格；若是变量中有空格，要用双引号把整个变量括起来 A="I LOVE YOU"
- 撤销变量：***unset 变量名***
- 声明静态（只读不可改）变量：***readonly变量***，此变量不能unset
- 将局部变量提升为全局环境变量，***export 变量名***
- 局部变量只能本shell使用，全局变量可以供所有子shell使用；改变一个shell中的变量值的时候，只会影响自己以及所有的子shell，不会影响父shell
  *注意：变量默认类型都是字符串类型，不能进行数值运算*

2.3 特殊变量
  2.3.1 **$n**
  n为数字，$0代表脚本名称，$1-$9代表第一到第九个参数，十以上的参数，用\${10}的形式表示。
  例如：
  ![1679368310432](image/Shell学习笔记/1679368310432.png)

  2.3.2 **$#**
  获取所有输入参数个数，不算$0

  2.3.3 **$\*** \$@
  $* 代表命令行中所有的参数，把所有的参数看成一个整体
  $@ 代表命令行中的所有参数，但是把每个参数区分对待

  2.3.4 **$?**
  最后一次执行的命令的返回状态。为0说明正确执行，非0说明未正确执行
  ![1679368843485](image/Shell学习笔记/1679368843485.png)

## 3.运算符

\$((运算式))或$\[(运算式)]
![1679369147566](image/Shell学习笔记/1679369147566.png)

## 4.条件判断

4.1 基本语法
***test condition***或者[ condition ]，注意留空格
4.2 常用判断条件
  4.2.1 两个整数之间比较
  *-eq 等于(equal)*
  *-ne 不等于(not equal)*
  *-lt 小于(less than)*
  *-le 小于等于(less equal)*
  *-gt 大于(greater than)*
  *-ge 大于等于(greater equal)*
  4.2.2 按照文件权限进行判断
  *-r 有读的权限(read)*
  *-w 有写的权限(write)*
  *-x 有执行的权限(execute)*
  4.2.3 按照文件类型进行判断
  -e 文件存在(existence)
  -f 文件存在并且是一个常规的文件(file)
  -d 文件存在并且是一个目录(directory)
4.3 案例实操
![1679370222829](image/Shell学习笔记/1679370222829.png)

## 5.流程控制

5.1 if判断
  5.1.1 单分支
  ***if [ 条件判断式 ]；then
      程序
  fi***
  或
  ***if [ 条件判断式 ]
  then
      程序
  fi***
  5.1.2 多分支
  ***if [ 条件判断式 ]
  then
      程序
  elif [ 条件判断式 ]
  then
      程序
  else
      程序
  fi***

- 注意事项：
  - []和条件判断式之间必须有空格
  - if后要有空格

5.2 case语句
  5.2.1 语法
  ***case $变量名 in
  "值 1"）
      如果变量的值等于值 1，则执行程序 1
  ;;
  "值 2"）
      如果变量的值等于值 2，则执行程序 2
  ;;
      …省略其他分支…
  \*）
      如果变量的值都不是以上的值，则执行此程序
  ;;
  esac***
  5.2.2 案例 vim hello.sh
  ***#!/bin/bash
  case $num in
  "1")
    echo "1"
  ;;
  "2")
    echo "2"
  ;;
  \*)
    echo "renyao"
  ;;
  esac***
5.3 for循环
  5.3.1 语法
  ***for (( 初始值;循环控制条件;变量变化 ))
  do
    程序
  done***
  或
  ***for 变量 in 值1 值2 值3
  do
    程序
  done***

  5.3.2 案例 vim hello.sh

```
  #!/bin/bash
  for i in 1 2 3 4
  do
    echo $i
  done
```

5.4 while循环
```
while [ 条件判断式 ]
do
  程序
done
```

## 6.read读取控制台输入
6.1 语法
```
read (选项) (参数)
①选项：
    -p：指定读取值时的提示符；
    -t：指定读取值时等待的时间（秒）如果-t 不加表示一直等待
②参数
变量：指定读取值的变量名
```
6.2 案例
```
read -t 7 -p "Enter your name in 7 seconds :" NN
echo $NN
```

## 7.函数

